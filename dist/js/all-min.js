$(function(){var n=$(".header_left"),i=$(".nav"),o=$(".nav_left"),t=$(".phone_app"),e=$(".nav_second_menu");n.find("li").first().find("a").css({color:"#f00"}),o.find("li").first().find("a").css({color:"#f00"});var a=t.find("a");a.hover(function(){$(this).next("div").show()},function(){$(this).next("div").hide()}),$(window).on("scroll",function(){$(this).scrollTop()>=120?i.addClass("nav_scroll"):i.removeClass("nav_scroll")});var s=o.find("a");s.hover(function(){$(this).next(".nav_second_menu").show()},function(){$(this).next(".nav_second_menu").hide()}),e.hover(function(){$(this).css({display:"block"})},function(){$(this).css({display:"none"})})}),jQuery(function(n){var i,o=n(".imgBox"),t=n(".overolay"),e=n(".small_imgBox"),a=n(".show_big"),s=n(".bigerGlass"),r=n(".count_choose"),l=n(".pro_button").find("a"),c=n(".nav_right"),g=c.find(".shopping_bag"),p=(g.find("a").html(),n(".price_total").find("a")),d=(p.html(),n(".logined")),h=n(".login_li"),m=document.cookie,f=new RegExp("\\*username=\\{.+\\}","g"),u=m.match(f);if(null!=u){for(var _=0;_<u.length;_++){var v=u[_].indexOf("="),$=u[_].substring(v+1);if(i=JSON.parse($),1==i.ynlogin){d.html("你好"+i.username+",退出"),d.show(),h.hide();break}}null!=i.goods&&(g.find("a").html(i.goods.gCount),p.html("￥"+i.goods.gTotal))}d.on("click",function(){i.ynlogin=0;var n=JSON.stringify(i),o=i.username+"*username";document.cookie=o+"="+n+";path=/;",d.hide(),h.show()}),t.on("mouseenter",function(i){var o=t.next("img").attr("src"),e=n("<img/>"),r={left:i.offsetX-100,top:i.offsetY-100};r.left<0&&(r.left=0),r.left>280&&(r.left=280),r.top<0&&(r.top=0),r.top>440&&(r.top=440),s.css({top:r.top,left:r.left}),s.show(),a.show(),e.attr("src",o),e.css({width:960,height:1280}),e.appendTo(a)}),t.on("mousemove",function(i){var t={left:i.pageX-o.offset().left-100,top:i.pageY-o.offset().top-100},e=n(".show_big").find("img");t.left<0&&(t.left=0),t.left>280&&(t.left=280),t.top<0&&(t.top=0),t.top>440&&(t.top=440),s.css({top:t.top,left:t.left}),e.css({position:"absolute",top:2*-t.top,left:2*-t.left})}),t.on("mouseleave",function(){a.find("img").remove(),a.hide(),s.hide()});var j=e.find("li");j.on("click",function(i){var t=n(this).find("img").attr("src");return t=t.replace("a.jpg",".jpg"),o.children("img").attr("src",t),!1});var w=r.find(".count_num"),x=w.prev("span"),k=w.next("span"),b=r.find("i"),C=w.html();x.on("click",function(){return C--,C<1?(C=1,!1):void w.html(C)}),k.on("click",function(){return C++,C>5?(C=5,b.show(),setTimeout(function(){b.hide()},3e3),!1):void w.html(C)}),c.on("click",function(){void 0==i?(alert("请先登录"),window.location.href="login.html"):0==i.ynlogin&&(alert("请先登录"),window.location.href="login.html")}),l.on("click",function(){var o=n(".pro_info_title").html(),t=n(".pro_name").html(),e=n(".now_price").html(),a=w.html();e=e.substring(1);var s=a*e;if(void 0==i)alert("请先登录"),window.location.href="login.html";else{if(0!=i.ynlogin){alert("添加成功"),null==i.goods?i.goods={tittle:o,gName:t,unitPrice:e,gCount:a,gTotal:s}:(console.log(a,i.goods.gCount),i.goods.gCount=parseInt(i.goods.gCount)+parseInt(a),i.goods.gTotal=i.goods.gTotal+s);var r=JSON.stringify(i),l=i.username+"*username";return document.cookie=l+"="+r+";path=/;",g.find("a").html(i.goods.gCount),p.html("￥"+i.goods.gTotal),!1}alert("请先登录"),window.location.href="login.html"}})}),$(function(){function n(){k==-1280&&(b.css({left:-320}),k=-320),0==k&&(b.css({left:-960}),k=-960),C.each(function(n){k==-320&&1==n?$(this).css({background:"#f00"}).siblings().css({background:"#f1ebee"}):k==-640&&2==n?$(this).css({background:"#f00"}).siblings().css({background:"#f1ebee"}):k==-960&&0==n&&$(this).css({background:"#f00"}).siblings().css({background:"#f1ebee"})}),k-=320,i()}function i(){b.animate({left:k})}var o,t=$(".menu_con_imgBox"),e=$(".pro_menu_right"),a=$(".pro_menu_left"),s=$(".week_activities"),r=$(".week_nav"),l=$(".click_toTop"),c=$(".overcover"),g=$(".the_activities"),p=$(".nav_right"),d=p.find(".shopping_bag"),h=(d.find("a").html(),$(".price_total").find("a")),m=(h.html(),$(".logined")),f=$(".login_li"),u=document.cookie,_=new RegExp("\\*username=\\{.+\\}","g"),v=u.match(_);if(null!=v){for(var j=0;j<v.length;j++){var w=v[j].indexOf("="),x=v[j].substring(w+1);if(o=JSON.parse(x),1==o.ynlogin){m.html("你好"+o.username+",退出"),m.show(),f.hide();break}}null!=o.goods&&(d.find("a").html(o.goods.gCount),h.html("￥"+o.goods.gTotal))}p.on("click",function(){void 0==o?(alert("请先登录"),window.location.href="html/login.html"):0==o.ynlogin&&(alert("请先登录"),window.location.href="html/login.html")}),m.on("click",function(){o.ynlogin=0;var n=JSON.stringify(o),i=o.username+"*username";document.cookie=i+"="+n+";path=/;",m.hide(),f.show()});var k=-320,b=e.find("img"),C=$(".choose_span").find("span"),y=(setInterval(n,2e3),e.find("a"));y.each(function(n,o){$(this).click(function(n){$(this).hasClass("prev")?k+=320:k-=320,i(),n.preventDefault()})}),C.each(function(n){$(this).on("click",function(o){$(this).css({background:"#f00"}).siblings().css({background:"#f1ebee"}),0==n?(k=-320,i()):1==n?(k=-640,i()):(k=-960,i()),o.preventDefault()})});var T=$(".choose_span");T.on("click",function(n){n.preventDefault()}),t.hover(function(){$(this).find(".img_mask").show(),$(this).find("img").stop().animate({width:340,height:212,margin:-10})},function(){$(this).find(".img_mask").hide(),$(this).find("img").stop().animate({width:320,height:192,margin:0})}),a.find(".week_activities").first().show().siblings(".week_activities").hide();var O=new Date,N=r.find(".week_nav_first");N.find("span").html("明天");var S=r.find("li").not(".week_nav_first");S.each(function(n){$(this).find("span").html(convertToWeek((O.getDay()+n+2)%7))});var E=r.find("li"),J=E.find("span"),s=$(".week_activities");$.each(J,function(n){var i=$(this),o=n;$(this).on("click",function(){s.each(function(n){o==n&&(i.parent().css({borderBottom:"4px solid #000"}).siblings("li").css({border:"none"}),$(this).show().siblings(".week_activities").hide())})})}),$(window).on("scroll",function(){$(this).scrollTop()>=400?l.show():l.hide()});var A=l.find("span");A.on("click",function(){navigator.userAgent.indexOf("Firefox")>=0?document.documentElement.scrollTop=0:$("body").scrollTop(0)}),g.hover(function(){$(this).find(".overcover").show()},function(){$(this).find(".overcover").hide()}),c.hover(function(){$(this).show()},function(){$(this).hide()})});var chArr=["1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],imgArr=["_01.jpg","_02.jpg","_03.jpg","_04.jpg","_05.jpg","_06.jpg","_07.jpg","_08.jpg","_09.jpg","max_01.jpg","max_02.jpg","max_03.jpg","max_04.jpg","max_05.jpg","max_06.jpg","max_07.jpg","max_09.jpg","max_10.jpg","max_11.jpg","max_12.jpg","max_13.jpg","max_14.jpg","max_15.jpg","max_16.jpg","max_17.jpg","max_18.jpg","max_19.jpg","max_20.jpg","max_21.jpg","max_22.jpg","max_24.jpg","max_25.jpg","max_26.jpg","max_27.jpg","max_28.jpg","min_01.jpg","min_02.jpg","min_03.jpg","min_04.jpg","min_05.jpg","min_06.jpg","min_07.jpg","min_08.jpg","min_09.jpg","min_10.jpg","min_11.jpg","min_12.jpg","min_13.jpg","min_14.jpg","min_15.jpg","min_16.jpg","min_17.jpg","min_18.jpg","min_19.jpg","min_20.jpg","min_21.jpg","min_22.jpg","min_23.jpg","min_24.jpg","min_25.jpg","min_26.jpg"];$(function(){function n(){var n=a.val();return/^1[0-9]{10}$/.test(n)||/^\w+@\w+(\.\w+)+$/.test(n)?(s.hide(),!0):(s.html("请输入正确的手机号和邮箱"),s.show(),!1)}function i(){var n=r.val();return/^\w\w{4,18}\w$/.test(n)?(l.hide(),!0):(l.html("密码要在6~20位之间并不能用特殊符号"),l.show(),!1)}function o(){m="",f.each(function(){var n=randomNum(0,59);$(this).attr("src","../img/"+imgArr[n]),m+=chArr[n]})}function t(){return $autoIdenCodeVal=g.val(),$autoIdenCodeVal!=m?(p.html("您输入的验证码有误"),p.show(),o(),!1):(p.hide(),!0)}function e(n,i){var o=document.cookie,t=new RegExp(n+"\\*username=\\{.+\\}"),e=o.match(t),a=e[0],s=a.indexOf("="),r=a.substring(s+1),l=JSON.parse(r);if(l.username==n&&l.password==i){l.ynlogin=1;var c=JSON.stringify(l),g=n+"*username";return document.cookie=g+"="+c+";path=/;",!0}return!1}var a=$("#account"),s=$("#accError"),r=$("#password"),l=$("#passError"),c=$(".iden_code"),g=$("#autoIdenCode"),p=$("#idenCodeError"),d=$(".auto_login"),h=$(".login_btn").find("a");a.on("blur",function(){n()}),r.on("blur",function(){i()});var m="",f=c.find("img");o(),g.on("blur",function(){t()});var u=0,_=d.find("span");d.on("click",function(){u?(u=0,_.css("background","#fff")):(u=1,_.css("background","#000"))}),h.on("click",function(o){var s=a.val(),l=r.val();if(!(n()&&i()&&t()))return console.log("d"),!1;var c=e(s,l);return c?void alert("登录成功"):(alert("账户或密码输入不正确"),!1)})}),$(function(){function n(){S.empty(),E=0,J.each(function(){if($(this).find("span").hasClass("yes_choose")){var n=$(this).find("i").html();$("<li/>").addClass("selected_attr_li").html("种类："+n).appendTo(S),E++}}),0==E?N.hide():N.show()}function i(n){Y.each(function(i){if(i==n-1)return $(this).show().siblings().hide(),!1})}function o(n){g.html(n+"/"+A)}function t(n){G.each(function(i){if(i==n-1)return $(this).addClass("high_light").siblings().removeClass("high_light"),!1})}function e(n){f.val(n)}var a,s=$(".choose_right"),r=$(".pro_pic"),l=$(".pro_img"),c=$(".hover_img"),g=$("#grade"),p=$(".turn_left"),d=$(".turn_right"),h=$(".prev_page"),m=$(".next_page"),f=$("#page_num"),u=$("#confirm"),_=$(".nav_right"),v=_.find(".shopping_bag"),j=(v.find("a").html(),$(".price_total").find("a")),w=(j.html(),$(".logined")),x=$(".login_li"),k=document.cookie,b=new RegExp("\\*username=\\{.+\\}","g"),C=k.match(b);if(null!=C){for(var y=0;y<C.length;y++){var T=C[y].indexOf("="),O=C[y].substring(T+1);if(a=JSON.parse(O),1==a.ynlogin){w.html("你好"+a.username+",退出"),w.show(),x.hide();break}}null!=a.goods&&(v.find("a").html(a.goods.gCount),j.html("￥"+a.goods.gTotal))}_.on("click",function(){void 0==a?(alert("请先登录"),window.location.href="login.html"):0==a.ynlogin&&(alert("请先登录"),window.location.href="login.html")}),w.on("click",function(){a.ynlogin=0;var n=JSON.stringify(a),i=a.username+"*username";document.cookie=i+"="+n+";path=/;",w.hide(),x.show()});var N=$(".select_attr"),S=$(".selected_attr"),E=0;S.on("click","li",function(){var i=$(this).html();J.each(function(){var n=$(this).find("i").html();i=="种类："+n&&($(this).find("span").removeClass("yes_choose"),$(this).find("span").addClass("no_choose"))}),$(this).remove(),n()});var J=s.find("li");J.on("click",function(){if($(this).find("span").hasClass("no_choose")){$(this).find("i").html();$(this).find("span").removeClass("no_choose"),$(this).find("span").addClass("yes_choose"),n()}else $(this).find("span").removeClass("yes_choose"),$(this).find("span").addClass("no_choose"),n()});var A=3,I=0,B=$("#productTotal"),D=$(".pro_pic").find(".every_pro"),R=$("#pageTotal");R.html(A);for(var y=0;y<A;y++)if(0==y){var V=$("<span/>").addClass("page_span high_light").html(y+1);V.insertBefore(m)}else{var V=$("<span/>").addClass("page_span").html(y+1);V.insertBefore(m)}var G=$(".page_span");D.each(function(){I++}),B.html(I),l.hover(function(){$(this).prev(".hover_img").show()},function(){$(this).prev(".hover_img").hide()}),c.hover(function(){$(this).show()},function(){$(this).hide()});var P=c.find("span");P.on("mouseenter",function(){var n=$(this).find("img").attr("src"),i=n.replace("a.jpg",".jpg");$(this).parent().next(".pro_img").find("img").attr("src",i)});var X=1,Y=r.find(".pro_pic_list");Y.hide(),Y.first().show(),h.on("click",function(){return 1!=X&&(X--,i(X),t(X),e(X),o(X),void 0)}),m.on("click",function(){return X!=A&&(X++,i(X),t(X),e(X),o(X),void 0)}),p.on("click",function(){return 1!=X&&(X--,i(X),t(X),e(X),o(X),void 0)}),d.on("click",function(){return X!=A&&(X++,i(X),t(X),e(X),o(X),void 0)}),G.each(function(){$(this).on("click",function(){var n=$(this).html();i(n),t(n),e(n),o(n)})}),u.on("click",function(){var n=f.val();i(n),t(n),e(n),o(n)})});var chArr=["1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],imgArr=["_01.jpg","_02.jpg","_03.jpg","_04.jpg","_05.jpg","_06.jpg","_07.jpg","_08.jpg","_09.jpg","max_01.jpg","max_02.jpg","max_03.jpg","max_04.jpg","max_05.jpg","max_06.jpg","max_07.jpg","max_09.jpg","max_10.jpg","max_11.jpg","max_12.jpg","max_13.jpg","max_14.jpg","max_15.jpg","max_16.jpg","max_17.jpg","max_18.jpg","max_19.jpg","max_20.jpg","max_21.jpg","max_22.jpg","max_24.jpg","max_25.jpg","max_26.jpg","max_27.jpg","max_28.jpg","min_01.jpg","min_02.jpg","min_03.jpg","min_04.jpg","min_05.jpg","min_06.jpg","min_07.jpg","min_08.jpg","min_09.jpg","min_10.jpg","min_11.jpg","min_12.jpg","min_13.jpg","min_14.jpg","min_15.jpg","min_16.jpg","min_17.jpg","min_18.jpg","min_19.jpg","min_20.jpg","min_21.jpg","min_22.jpg","min_23.jpg","min_24.jpg","min_25.jpg","min_26.jpg"];$(function(){function n(){var n=a.val();return/^1[0-9]{10}$/.test(n)||/^\w+@\w+(\.\w+)+$/.test(n)?(s.hide(),!0):(s.html("请输入正确的手机号和邮箱"),s.show(),!1)}function i(){var n=r.val();return/^\w\w{4,18}\w$/.test(n)?(l.hide(),!0):(l.html("密码要在6~20位之间并不能用特殊符号"),l.show(),!1)}function o(){var n=r.val(),i=c.val();return n==i?(g.hide(),!0):(g.html("两次密码输入不一致"),g.show(),!1)}function t(){u="",_.each(function(){var n=randomNum(0,59);$(this).attr("src","../img/"+imgArr[n]),u+=chArr[n]})}function e(){return $autoIdenCodeVal=d.val(),$autoIdenCodeVal!=u?(h.html("您输入的验证码有误"),h.show(),t(),!1):(h.hide(),!0)}var a=$("#account"),s=$("#accError"),r=$("#password"),l=$("#passError"),c=$("#repassword"),g=$("#repassError"),p=$(".iden_code"),d=$("#autoIdenCode"),h=$("#idenCodeError"),m=$(".login_btn").find("a"),f=$(".send_email");a.on("blur",function(){n()}),r.on("blur",function(){i()}),c.on("blur",function(){o()});var u="",_=p.find("img");t(),d.on("blur",function(){e()}),m.on("click",function(t){if(!(n()&&i()&&o()&&e()))return!1;var s=a.val(),l=r.val(),c={username:s,password:l,ynlogin:0},g=JSON.stringify(c),p=s+"*username";document.cookie=p+"="+g+";path=/;",console.log(document.cookie),alert("注册成功")});var v=0,j=f.find("span");f.on("click",function(){v?(v=0,j.css("background","#fff")):(v=1,j.css("background","#000"))})}),$(function(){var n=$(".header_left"),i=$(".nav"),o=$(".nav_left"),t=$(".phone_app"),e=$(".nav_second_menu"),a=$(".shoppingCar_tab"),s=$(".onSell"),r=$(".hopeList"),l=$(".lost");n.find("li").first().find("a").css({color:"#f00"}),o.find("li").first().find("a").css({color:"#f00"});var c,g=$(".nav_right"),p=g.find(".shopping_bag"),d=(p.find("a").html(),$(".price_total").find("a")),h=(d.html(),$(".shopping_list")),m=$(".shopping_list_content"),f=$(".clean_list"),u=$(".por_sum"),s=$(".onSell"),_=$(".logined"),v=$(".login_li"),j=document.cookie,w=new RegExp("\\*username=\\{.+\\}","g"),x=j.match(w);if(null!=x){for(var k=0;k<x.length;k++){var b=x[k].indexOf("="),C=x[k].substring(b+1);if(c=JSON.parse(C),1==c.ynlogin){_.html("你好"+c.username+",退出"),_.show(),v.hide();break}}if(null!=c.goods){p.find("a").html(c.goods.gCount),d.html("￥"+c.goods.gTotal),s.hide(),f.show(),h.show(),u.html(c.goods.gTotal);var y=$("<ul>").addClass("unbuy_pro"),T=$("<p/>").addClass("unbuy_pro_img");$("<img src='img/GM1-901-00033gwc-a.jpg'/>").appendTo(T);var O=$("<li>").addClass("unbuy_pro_left").appendTo(y),N=$("<p/>").addClass("unbuy_pro_txt");$("<span>").addClass("pro_title").html(c.goods.tittle).appendTo(N),$("<span>").addClass("pro_gname").html(c.goods.gName).appendTo(N);T.appendTo(O),N.appendTo(O);var S=($("<li>").addClass("unit_price").html(c.goods.unitPrice).appendTo(y),$("<div>").addClass("num_choose")),E=$("<span>").addClass("sub_num").html("-").appendTo(S),J=($("<input type='text'/>").addClass("pro_num").val(c.goods.gCount).appendTo(S),$("<span>").addClass("add_num").html("+").appendTo(S)),A=$("<li>").addClass("pro_count").appendTo(y);S.appendTo(A),$("<li>").appendTo(y);var I=($("<li>").addClass("total").html("￥"+c.goods.gTotal).appendTo(y),$("<li>").addClass("list_last").appendTo(y));$("<img src='img/icon_delete.png'/>").appendTo(I),y.appendTo(m),E.on("click",function(){var n=$(".pro_num").val(),i=$(".unit_price").html();if(1==n)return!1;n--,$(".pro_num").val(n);var o=n*i;$(".total").html("￥"+o),u.html(o)}),J.on("click",function(){var n=$(".pro_num").val(),i=$(".unit_price").html();n++,$(".pro_num").val(n);var o=n*i;$(".total").html("￥"+o),u.html(o)}),I.on("click","img",function(){$(this).parent().parent().remove();var n=$(".shopping_list_content").find(".unbuy_pro");c.goods=null;var i=JSON.stringify(c),o=c.username+"*username";document.cookie=o+"="+i+";path=/;",p.find("a").html("0"),d.html("￥0.00"),0==n.length&&(s.show(),f.hide(),h.hide())})}}_.on("click",function(){c.ynlogin=0;var n=JSON.stringify(c),i=c.username+"*username";document.cookie=i+"="+n+";path=/;",_.hide(),v.show()});var B=t.find("a");B.hover(function(){$(this).next("div").show()},function(){$(this).next("div").hide()}),$(window).on("scroll",function(){$(this).scrollTop()>=120?i.addClass("nav_scroll"):i.removeClass("nav_scroll")});var D=o.find("a");D.hover(function(){$(this).next(".nav_second_menu").show()},function(){$(this).next(".nav_second_menu").hide()}),e.hover(function(){$(this).css({display:"block"})},function(){$(this).css({display:"none"})});var R=a.find("span");R.each(function(n){$(this).on("click",function(){0==n?(s.show().siblings().hide(),$(this).addClass("selected_span").siblings().removeClass("selected_span")):1==n?(r.show().siblings().hide(),$(this).addClass("selected_span").siblings().removeClass("selected_span")):(l.show().siblings().hide(),$(this).addClass("selected_span").siblings().removeClass("selected_span"))})})});